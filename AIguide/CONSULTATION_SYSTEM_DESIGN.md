# H·ªá Th·ªëng T∆∞ V·∫•n & ƒê·∫∑t L·ªãch - Thi·∫øt K·∫ø Chi Ti·∫øt

## üéØ **T·ªïng Quan H·ªá Th·ªëng**

H·ªá th·ªëng t∆∞ v·∫•n v√† ƒë·∫∑t l·ªãch ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ k·∫øt n·ªëi ng∆∞·ªùi d√πng (User) v·ªõi c√°c chuy√™n gia t∆∞ v·∫•n (Consultant) trong lƒ©nh v·ª±c ph√≤ng ch·ªëng ma t√∫y. H·ªá th·ªëng h·ªó tr·ª£ ƒë·∫∑t l·ªãch tr·ª±c tuy·∫øn, thanh to√°n v√† qu·∫£n l√Ω l·ªãch h·∫πn.

## üë• **C√°c ƒê·ªëi T∆∞·ª£ng Ng∆∞·ªùi D√πng**

### **1. User (Ng∆∞·ªùi D√πng)**
- **M·ª•c ƒë√≠ch:** T√¨m ki·∫øm v√† ƒë·∫∑t l·ªãch t∆∞ v·∫•n
- **Quy·ªÅn h·∫°n:** Xem danh s√°ch consultant, ƒë·∫∑t l·ªãch, thanh to√°n, qu·∫£n l√Ω l·ªãch h·∫πn c√° nh√¢n

### **2. Consultant (Chuy√™n Gia T∆∞ V·∫•n)**
- **M·ª•c ƒë√≠ch:** Cung c·∫•p d·ªãch v·ª• t∆∞ v·∫•n chuy√™n nghi·ªáp
- **Quy·ªÅn h·∫°n:** Xem l·ªãch h·∫πn, x√°c nh·∫≠n/h·ªßy l·ªãch h·∫πn, qu·∫£n l√Ω th√¥ng tin c√° nh√¢n

### **3. Admin (Qu·∫£n Tr·ªã Vi√™n)**
- **M·ª•c ƒë√≠ch:** Qu·∫£n l√Ω to√†n b·ªô h·ªá th·ªëng
- **Quy·ªÅn h·∫°n:** Qu·∫£n l√Ω users, consultants, appointments, thanh to√°n, b√°o c√°o

## üîÑ **Flow Ho·∫°t ƒê·ªông Chi Ti·∫øt**

### **üìã Phase 1: T√¨m Ki·∫øm & Ch·ªçn Consultant**

#### **1.1 Trang T√¨m Ki·∫øm Consultant**
```
URL: /consultants
Method: GET
```

**Giao di·ªán:**
- **Search Bar:** T√¨m ki·∫øm theo t√™n, chuy√™n m√¥n, ƒë·ªãa ƒëi·ªÉm
- **Filter Options:**
  - Chuy√™n m√¥n (Ma t√∫y, T√¢m l√Ω, Y t·∫ø)
  - ƒê·ªãa ƒëi·ªÉm (H√† N·ªôi, TP.HCM, ƒê√† N·∫µng)
  - ƒê√°nh gi√° (4-5 sao, 3-4 sao)
  - Gi√° c·∫£ (D∆∞·ªõi 500k, 500k-1M, Tr√™n 1M)
- **Sort Options:** Theo ƒë√°nh gi√°, gi√° c·∫£, kinh nghi·ªám

#### **1.2 API T√¨m Ki·∫øm Consultant**
```javascript
// GET /api/consultants/search
{
  "keyword": "ma t√∫y",
  "specialty": "DRUG_PREVENTION",
  "location": "HANOI",
  "rating": 4,
  "priceRange": "500k-1M",
  "page": 1,
  "size": 10
}
```

#### **1.3 Hi·ªÉn Th·ªã Danh S√°ch Consultant**
```javascript
// Response t·ª´ API
{
  "consultants": [
    {
      "id": 1,
      "name": "Dr. Nguy·ªÖn VƒÉn A",
      "specialty": "DRUG_PREVENTION",
      "experience": 5,
      "rating": 4.8,
      "totalReviews": 150,
      "hourlyRate": 800000,
      "location": "HANOI",
      "avatar": "avatar1.jpg",
      "description": "Chuy√™n gia t∆∞ v·∫•n ph√≤ng ch·ªëng ma t√∫y v·ªõi 5 nƒÉm kinh nghi·ªám",
      "availableSlots": ["09:00", "14:00", "16:00"]
    }
  ],
  "totalPages": 5,
  "currentPage": 1
}
```

### **üìÖ Phase 2: ƒê·∫∑t L·ªãch H·∫πn**

#### **2.1 Trang Chi Ti·∫øt Consultant**
```
URL: /consultants/{id}
Method: GET
```

**Th√¥ng tin hi·ªÉn th·ªã:**
- Th√¥ng tin c√° nh√¢n consultant
- ƒê√°nh gi√° v√† review t·ª´ kh√°ch h√†ng
- L·ªãch l√†m vi·ªác
- Gi√° c·∫£ theo gi·ªù
- N√∫t "ƒê·∫∑t L·ªãch T∆∞ V·∫•n"

#### **2.2 Trang ƒê·∫∑t L·ªãch**
```
URL: /appointments/book
Method: POST
```

**Form ƒë·∫∑t l·ªãch:**
```javascript
{
  "consultantId": 1,
  "appointmentDate": "2024-01-15",
  "appointmentTime": "14:30:00",
  "duration": 60, // ph√∫t
  "appointmentType": "ONLINE", // ONLINE, OFFLINE
  "notes": "C·∫ßn t∆∞ v·∫•n v·ªÅ v·∫•n ƒë·ªÅ s·ª≠ d·ª•ng ma t√∫y",
  "preferredLanguage": "Vietnamese",
  "emergencyContact": {
    "name": "Nguy·ªÖn VƒÉn B",
    "phone": "0123456789",
    "relationship": "B·ªë"
  }
}
```

#### **2.3 X√°c Nh·∫≠n Th√¥ng Tin**
**Hi·ªÉn th·ªã:**
- Th√¥ng tin consultant ƒë√£ ch·ªçn
- Th·ªùi gian v√† ƒë·ªãa ƒëi·ªÉm
- T·ªïng ti·ªÅn (Gi√°/gi·ªù √ó S·ªë gi·ªù)
- Th√¥ng tin c√° nh√¢n ƒë√£ nh·∫≠p
- N√∫t "X√°c Nh·∫≠n & Thanh To√°n"

### **üí≥ Phase 3: Thanh To√°n**

#### **3.1 Trang Thanh To√°n**
```
URL: /payments/checkout
Method: POST
```

**Th√¥ng tin thanh to√°n:**
```javascript
{
  "appointmentId": 1,
  "amount": 800000,
  "currency": "VND",
  "paymentMethod": "VNPAY", // VNPAY, MOMO, ZALOPAY
  "billingInfo": {
    "fullName": "Nguy·ªÖn VƒÉn C",
    "email": "user@example.com",
    "phone": "0123456789",
    "address": "123 ƒê∆∞·ªùng ABC, H√† N·ªôi"
  }
}
```

#### **3.2 T√≠ch H·ª£p Thanh To√°n**
**C√°c ph∆∞∆°ng th·ª©c thanh to√°n:**
- **VNPAY:** Chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang thanh to√°n VNPAY
- **MOMO:** QR Code ho·∫∑c deep link
- **ZaloPay:** QR Code
- **Bank Transfer:** Th√¥ng tin chuy·ªÉn kho·∫£n

#### **3.3 X·ª≠ L√Ω K·∫øt Qu·∫£ Thanh To√°n**
```javascript
// Callback t·ª´ VNPAY
{
  "appointmentId": 1,
  "transactionId": "VNPAY123456",
  "status": "SUCCESS",
  "amount": 800000,
  "paymentTime": "2024-01-10T14:30:00Z"
}
```

### **üì± Phase 4: Qu·∫£n L√Ω L·ªãch H·∫πn**

#### **4.1 Dashboard User**
```
URL: /dashboard/user
```

**Th√¥ng tin hi·ªÉn th·ªã:**
- L·ªãch h·∫πn s·∫Øp t·ªõi
- L·ªãch h·∫πn ƒë√£ ho√†n th√†nh
- L·ªãch h·∫πn ƒë√£ h·ªßy
- Th√¥ng b√°o m·ªõi

#### **4.2 Dashboard Consultant**
```
URL: /dashboard/consultant
```

**Th√¥ng tin hi·ªÉn th·ªã:**
- L·ªãch h·∫πn ch·ªù x√°c nh·∫≠n
- L·ªãch h·∫πn ƒë√£ x√°c nh·∫≠n
- L·ªãch h·∫πn h√¥m nay
- Th·ªëng k√™ thu nh·∫≠p

## üîî **H·ªá Th·ªëng Th√¥ng B√°o**

### **4.3 Notification System**
```javascript
// C·∫•u tr√∫c notification
{
  "id": 1,
  "userId": 1,
  "type": "APPOINTMENT_CONFIRMED", // APPOINTMENT_CONFIRMED, APPOINTMENT_CANCELLED, PAYMENT_SUCCESS
  "title": "L·ªãch h·∫πn ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n",
  "message": "Dr. Nguy·ªÖn VƒÉn A ƒë√£ x√°c nh·∫≠n l·ªãch h·∫πn ng√†y 15/01/2024",
  "data": {
    "appointmentId": 1,
    "consultantName": "Dr. Nguy·ªÖn VƒÉn A",
    "appointmentDate": "2024-01-15T14:30:00Z"
  },
  "isRead": false,
  "createdAt": "2024-01-10T10:30:00Z"
}
```

### **4.4 Email Notifications**
**C√°c lo·∫°i email:**
- **X√°c nh·∫≠n ƒë·∫∑t l·ªãch:** G·ª≠i cho user sau khi thanh to√°n th√†nh c√¥ng
- **X√°c nh·∫≠n t·ª´ consultant:** G·ª≠i cho user khi consultant x√°c nh·∫≠n
- **Nh·∫Øc l·ªãch h·∫πn:** G·ª≠i 24h tr∆∞·ªõc l·ªãch h·∫πn
- **H·ªßy l·ªãch h·∫πn:** G·ª≠i cho user khi consultant h·ªßy

## üìä **Qu·∫£n L√Ω Tr·∫°ng Th√°i L·ªãch H·∫πn**

### **4.5 Appointment Status Flow**
```
PENDING ‚Üí CONFIRMED ‚Üí COMPLETED
    ‚Üì
CANCELLED
```

**Chi ti·∫øt tr·∫°ng th√°i:**
- **PENDING:** L·ªãch h·∫πn ƒë√£ ƒë·∫∑t, ch·ªù consultant x√°c nh·∫≠n
- **CONFIRMED:** Consultant ƒë√£ x√°c nh·∫≠n
- **COMPLETED:** L·ªãch h·∫πn ƒë√£ ho√†n th√†nh
- **CANCELLED:** L·ªãch h·∫πn ƒë√£ h·ªßy

### **4.6 API Qu·∫£n L√Ω Tr·∫°ng Th√°i**
```javascript
// Consultant x√°c nh·∫≠n l·ªãch h·∫πn
PUT /api/appointments/{id}/confirm
{
  "status": "CONFIRMED",
  "notes": "ƒê√£ x√°c nh·∫≠n l·ªãch h·∫πn"
}

// Consultant h·ªßy l·ªãch h·∫πn
PUT /api/appointments/{id}/cancel
{
  "status": "CANCELLED",
  "reason": "L√Ω do h·ªßy l·ªãch h·∫πn",
  "refundAmount": 800000
}
```

## üé® **Thi·∫øt K·∫ø Giao Di·ªán**

### **4.7 Responsive Design**
**Breakpoints:**
- **Mobile:** < 768px
- **Tablet:** 768px - 1024px
- **Desktop:** > 1024px

### **4.8 UI/UX Principles**
- **ƒê∆°n gi·∫£n:** D·ªÖ s·ª≠ d·ª•ng, √≠t b∆∞·ªõc
- **R√µ r√†ng:** Th√¥ng tin hi·ªÉn th·ªã r√µ r√†ng
- **Nhanh ch√≥ng:** T·ªëi ∆∞u t·ªëc ƒë·ªô t·∫£i trang
- **An to√†n:** B·∫£o m·∫≠t th√¥ng tin c√° nh√¢n

## üîß **Technical Implementation**

### **4.9 Frontend Technologies**
- **React.js:** UI framework
- **Redux Toolkit:** State management
- **React Router:** Navigation
- **Axios:** HTTP client
- **Material-UI:** Component library

### **4.10 Backend APIs**
```javascript
// Consultant APIs
GET /api/consultants - L·∫•y danh s√°ch consultant
GET /api/consultants/{id} - L·∫•y th√¥ng tin consultant
GET /api/consultants/search - T√¨m ki·∫øm consultant

// Appointment APIs
POST /api/appointments - T·∫°o l·ªãch h·∫πn
GET /api/appointments/user/{userId} - L·ªãch h·∫πn c·ªßa user
GET /api/appointments/consultant/{consultantId} - L·ªãch h·∫πn c·ªßa consultant
PUT /api/appointments/{id}/confirm - X√°c nh·∫≠n l·ªãch h·∫πn
PUT /api/appointments/{id}/cancel - H·ªßy l·ªãch h·∫πn

// Payment APIs
POST /api/payments - T·∫°o thanh to√°n
GET /api/payments/{id} - L·∫•y th√¥ng tin thanh to√°n
POST /api/payments/{id}/callback - Callback t·ª´ payment gateway

// Notification APIs
GET /api/notifications - L·∫•y th√¥ng b√°o
PUT /api/notifications/{id}/read - ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc
```

## üìà **T√≠nh NƒÉng N√¢ng Cao**

### **4.11 Video Call Integration**
- **WebRTC:** H·ªó tr·ª£ video call tr·ª±c tuy·∫øn
- **Room Management:** Qu·∫£n l√Ω ph√≤ng h·ªçp
- **Recording:** Ghi l·∫°i bu·ªïi t∆∞ v·∫•n (n·∫øu ƒë∆∞·ª£c ph√©p)

### **4.12 AI Assistant**
- **Chatbot:** H·ªó tr·ª£ t∆∞ v·∫•n s∆° b·ªô
- **Recommendation:** G·ª£i √Ω consultant ph√π h·ª£p
- **Smart Scheduling:** T·ª± ƒë·ªông s·∫Øp x·∫øp l·ªãch h·∫πn

### **4.13 Analytics & Reporting**
- **User Analytics:** Th·ªëng k√™ ng∆∞·ªùi d√πng
- **Consultant Performance:** Hi·ªáu su·∫•t consultant
- **Revenue Reports:** B√°o c√°o doanh thu
- **Appointment Trends:** Xu h∆∞·ªõng ƒë·∫∑t l·ªãch

## üîí **B·∫£o M·∫≠t & Tu√¢n Th·ªß**

### **4.14 Data Protection**
- **Encryption:** M√£ h√≥a d·ªØ li·ªáu nh·∫°y c·∫£m
- **GDPR Compliance:** Tu√¢n th·ªß quy ƒë·ªãnh b·∫£o v·ªá d·ªØ li·ªáu
- **HIPAA Compliance:** Tu√¢n th·ªß quy ƒë·ªãnh y t·∫ø (n·∫øu √°p d·ª•ng)

### **4.15 Authentication & Authorization**
- **JWT Tokens:** X√°c th·ª±c API
- **Role-based Access:** Ph√¢n quy·ªÅn theo vai tr√≤
- **Session Management:** Qu·∫£n l√Ω phi√™n ƒëƒÉng nh·∫≠p

## üöÄ **Demo Lu·ªìng Ch·∫°y Th·ª±c T·∫ø**

### **üì± Demo 1: User ƒê·∫∑t L·ªãch T∆∞ V·∫•n**

#### **B∆∞·ªõc 1: T√¨m Ki·∫øm Consultant**
```bash
# API: T√¨m ki·∫øm consultant
GET /api/consultants/search?keyword=ma t√∫y&specialty=DRUG_PREVENTION&location=HANOI

# Response:
{
  "consultants": [
    {
      "id": 2,
      "name": "Dr. Nguy·ªÖn VƒÉn A",
      "specialty": "DRUG_PREVENTION",
      "experience": 5,
      "rating": 4.8,
      "hourlyRate": 800000,
      "location": "HANOI",
      "description": "Chuy√™n gia t∆∞ v·∫•n ph√≤ng ch·ªëng ma t√∫y"
    }
  ]
}
```

#### **B∆∞·ªõc 2: Xem Chi Ti·∫øt Consultant**
```bash
# API: L·∫•y th√¥ng tin consultant
GET /api/consultants/2

# Response:
{
  "id": 2,
  "name": "Dr. Nguy·ªÖn VƒÉn A",
  "specialty": "DRUG_PREVENTION",
  "experience": 5,
  "rating": 4.8,
  "totalReviews": 150,
  "hourlyRate": 800000,
  "location": "HANOI",
  "description": "Chuy√™n gia t∆∞ v·∫•n ph√≤ng ch·ªëng ma t√∫y v·ªõi 5 nƒÉm kinh nghi·ªám",
  "availableSlots": ["09:00", "14:00", "16:00"]
}
```

#### **B∆∞·ªõc 3: ƒê·∫∑t L·ªãch H·∫πn**
```bash
# API: ƒê·∫∑t l·ªãch h·∫πn
POST /api/appointments/book
{
  "consultantId": 2,
  "appointmentDate": "2024-01-15",
  "appointmentTime": "14:30:00",
  "duration": 60,
  "appointmentType": "ONLINE",
  "notes": "C·∫ßn t∆∞ v·∫•n v·ªÅ v·∫•n ƒë·ªÅ s·ª≠ d·ª•ng ma t√∫y"
}

# Response:
{
  "id": 1,
  "clientId": 1,
  "consultantId": 2,
  "appointmentDate": "2024-01-15T14:30:00",
  "duration": 60,
  "status": "PENDING",
  "fee": 800000,
  "createdAt": "2024-01-10T10:30:00Z"
}
```

#### **B∆∞·ªõc 4: Thanh To√°n**
```bash
# API: T·∫°o thanh to√°n
POST /api/payments/create
{
  "appointmentId": 1,
  "amount": 800000,
  "paymentMethod": "VNPAY"
}

# Response:
{
  "id": 1,
  "appointmentId": 1,
  "amount": 800000,
  "currency": "VND",
  "paymentMethod": "VNPAY",
  "status": "PENDING",
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?token=abc123"
}
```

### **üë®‚Äç‚öïÔ∏è Demo 2: Consultant X·ª≠ L√Ω L·ªãch H·∫πn**

#### **B∆∞·ªõc 1: Xem L·ªãch H·∫πn Ch·ªù X√°c Nh·∫≠n**
```bash
# API: L·∫•y l·ªãch h·∫πn pending
GET /api/appointments/pending?consultantId=2

# Response:
{
  "appointments": [
    {
      "id": 1,
      "clientId": 1,
      "clientName": "Nguy·ªÖn VƒÉn User",
      "appointmentDate": "2024-01-15T14:30:00",
      "duration": 60,
      "status": "PENDING",
      "notes": "C·∫ßn t∆∞ v·∫•n v·ªÅ v·∫•n ƒë·ªÅ s·ª≠ d·ª•ng ma t√∫y",
      "fee": 800000
    }
  ]
}
```

#### **B∆∞·ªõc 2: X√°c Nh·∫≠n L·ªãch H·∫πn**
```bash
# API: X√°c nh·∫≠n l·ªãch h·∫πn
PUT /api/appointments/1/confirm?consultantId=2

# Response:
{
  "id": 1,
  "status": "CONFIRMED",
  "message": "L·ªãch h·∫πn ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n"
}
```

#### **B∆∞·ªõc 3: Th√™m Meeting Link**
```bash
# API: Th√™m link meeting
PUT /api/appointments/1/meeting-link?consultantId=2&meetingLink=https://meet.google.com/abc-xyz

# Response:
{
  "id": 1,
  "meetingLink": "https://meet.google.com/abc-xyz",
  "message": "Meeting link ƒë√£ ƒë∆∞·ª£c th√™m"
}
```

### **üìß Demo 3: H·ªá Th·ªëng Th√¥ng B√°o**

#### **B∆∞·ªõc 1: User Nh·∫≠n Th√¥ng B√°o**
```bash
# API: L·∫•y th√¥ng b√°o
GET /api/notifications?userId=1

# Response:
{
  "notifications": [
    {
      "id": 1,
      "type": "APPOINTMENT_CONFIRMED",
      "title": "L·ªãch h·∫πn ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n",
      "message": "Dr. Nguy·ªÖn VƒÉn A ƒë√£ x√°c nh·∫≠n l·ªãch h·∫πn ng√†y 15/01/2024",
      "isRead": false,
      "createdAt": "2024-01-10T10:30:00Z"
    },
    {
      "id": 2,
      "type": "PAYMENT_SUCCESS",
      "title": "Thanh to√°n th√†nh c√¥ng",
      "message": "Thanh to√°n l·ªãch h·∫πn #1 ƒë√£ th√†nh c√¥ng",
      "isRead": false,
      "createdAt": "2024-01-10T09:15:00Z"
    }
  ]
}
```

#### **B∆∞·ªõc 2: ƒê√°nh D·∫•u ƒê√£ ƒê·ªçc**
```bash
# API: ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc
PUT /api/notifications/1/read

# Response:
{
  "message": "Notification marked as read"
}
```

## üîê **Ph√¢n Quy·ªÅn Chuy√™n Nghi·ªáp**

### **üë§ User (Ng∆∞·ªùi D√πng)**
**Quy·ªÅn h·∫°n:**
- ‚úÖ Xem danh s√°ch consultant
- ‚úÖ T√¨m ki·∫øm consultant theo chuy√™n m√¥n, ƒë·ªãa ƒëi·ªÉm
- ‚úÖ Xem chi ti·∫øt consultant (profile, ƒë√°nh gi√°, gi√° c·∫£)
- ‚úÖ ƒê·∫∑t l·ªãch h·∫πn v·ªõi consultant
- ‚úÖ Thanh to√°n l·ªãch h·∫πn
- ‚úÖ Xem l·ªãch h·∫πn c√° nh√¢n
- ‚úÖ H·ªßy l·ªãch h·∫πn c·ªßa m√¨nh
- ‚úÖ Xem th√¥ng b√°o c√° nh√¢n
- ‚úÖ ƒê√°nh gi√° consultant sau khi ho√†n th√†nh

**API Endpoints:**
```bash
GET /api/consultants/**          # Xem consultant
POST /api/appointments/book      # ƒê·∫∑t l·ªãch
GET /api/appointments/user       # L·ªãch h·∫πn c√° nh√¢n
POST /api/payments/create        # Thanh to√°n
GET /api/notifications          # Th√¥ng b√°o
PUT /api/appointments/{id}/cancel # H·ªßy l·ªãch
```

### **üë®‚Äç‚öïÔ∏è Consultant (Chuy√™n Gia T∆∞ V·∫•n)**
**Quy·ªÅn h·∫°n:**
- ‚úÖ Xem l·ªãch h·∫πn c·ªßa m√¨nh
- ‚úÖ X√°c nh·∫≠n/h·ªßy l·ªãch h·∫πn
- ‚úÖ Th√™m meeting link
- ‚úÖ ƒê√°nh d·∫•u ho√†n th√†nh l·ªãch h·∫πn
- ‚úÖ Xem th·ªëng k√™ thu nh·∫≠p
- ‚úÖ Qu·∫£n l√Ω l·ªãch l√†m vi·ªác
- ‚úÖ Xem ƒë√°nh gi√° t·ª´ kh√°ch h√†ng
- ‚úÖ C·∫≠p nh·∫≠t th√¥ng tin c√° nh√¢n

**API Endpoints:**
```bash
GET /api/appointments/consultant/{id}     # L·ªãch h·∫πn c·ªßa consultant
GET /api/appointments/pending             # L·ªãch h·∫πn ch·ªù x√°c nh·∫≠n
PUT /api/appointments/{id}/confirm        # X√°c nh·∫≠n l·ªãch h·∫πn
PUT /api/appointments/{id}/cancel         # H·ªßy l·ªãch h·∫πn
PUT /api/appointments/{id}/complete       # Ho√†n th√†nh l·ªãch h·∫πn
PUT /api/appointments/{id}/meeting-link   # Th√™m meeting link
GET /api/statistics/{consultantId}        # Th·ªëng k√™ thu nh·∫≠p
```

### **üë®‚Äçüíº Manager (Qu·∫£n L√Ω)**
**Quy·ªÅn h·∫°n:**
- ‚úÖ T·∫•t c·∫£ quy·ªÅn c·ªßa Consultant
- ‚úÖ Xem danh s√°ch t·∫•t c·∫£ consultant
- ‚úÖ Qu·∫£n l√Ω l·ªãch h·∫πn trong h·ªá th·ªëng
- ‚úÖ Xem b√°o c√°o t·ªïng h·ª£p
- ‚úÖ Qu·∫£n l√Ω thanh to√°n
- ‚úÖ G·ª≠i th√¥ng b√°o h·ªá th·ªëng

**API Endpoints:**
```bash
GET /api/users/consultants               # Danh s√°ch consultant
GET /api/appointments/admin/all          # T·∫•t c·∫£ l·ªãch h·∫πn
GET /api/appointments/admin/status/{status} # L·ªãch h·∫πn theo status
GET /api/statistics/overview             # B√°o c√°o t·ªïng h·ª£p
POST /api/notifications/broadcast        # G·ª≠i th√¥ng b√°o h·ªá th·ªëng
```

### **üë®‚Äçüíª Admin (Qu·∫£n Tr·ªã Vi√™n)**
**Quy·ªÅn h·∫°n:**
- ‚úÖ T·∫•t c·∫£ quy·ªÅn c·ªßa Manager
- ‚úÖ Qu·∫£n l√Ω users (th√™m, s·ª≠a, x√≥a)
- ‚úÖ Qu·∫£n l√Ω consultant (ph√™ duy·ªát, t·ª´ ch·ªëi)
- ‚úÖ Qu·∫£n l√Ω h·ªá th·ªëng thanh to√°n
- ‚úÖ Xem logs h·ªá th·ªëng
- ‚úÖ Backup/restore d·ªØ li·ªáu
- ‚úÖ C·∫•u h√¨nh h·ªá th·ªëng

**API Endpoints:**
```bash
GET /api/users/**                        # Qu·∫£n l√Ω users
POST /api/users                          # T·∫°o user m·ªõi
PUT /api/users/{id}                      # C·∫≠p nh·∫≠t user
DELETE /api/users/{id}                   # X√≥a user
GET /api/admin/system-logs               # Logs h·ªá th·ªëng
POST /api/admin/backup                   # Backup d·ªØ li·ªáu
GET /api/admin/system-config             # C·∫•u h√¨nh h·ªá th·ªëng
```

### **üë®‚Äçüîß Staff (Nh√¢n Vi√™n H·ªó Tr·ª£)**
**Quy·ªÅn h·∫°n:**
- ‚úÖ Xem danh s√°ch l·ªãch h·∫πn
- ‚úÖ H·ªó tr·ª£ kh√°ch h√†ng
- ‚úÖ X·ª≠ l√Ω khi·∫øu n·∫°i
- ‚úÖ G·ª≠i th√¥ng b√°o h·ªó tr·ª£
- ‚úÖ Xem b√°o c√°o c∆° b·∫£n

**API Endpoints:**
```bash
GET /api/appointments/**                 # Xem l·ªãch h·∫πn
GET /api/users/basic-info               # Th√¥ng tin user c∆° b·∫£n
POST /api/support/tickets               # T·∫°o ticket h·ªó tr·ª£
GET /api/reports/basic                  # B√°o c√°o c∆° b·∫£n
```

## üéØ **Lu·ªìng X·ª≠ L√Ω L·ªói Chuy√™n Nghi·ªáp**

### **üìã Error Handling Strategy**

#### **1. Validation Errors (400)**
```json
{
  "error": "VALIDATION_ERROR",
  "message": "Appointment date must be in the future",
  "field": "appointmentDate",
  "code": "INVALID_DATE"
}
```

#### **2. Authentication Errors (401)**
```json
{
  "error": "AUTHENTICATION_ERROR",
  "message": "Invalid JWT token",
  "code": "INVALID_TOKEN"
}
```

#### **3. Authorization Errors (403)**
```json
{
  "error": "AUTHORIZATION_ERROR",
  "message": "You do not have permission to cancel this appointment",
  "code": "INSUFFICIENT_PERMISSIONS"
}
```

#### **4. Business Logic Errors (409)**
```json
{
  "error": "BUSINESS_LOGIC_ERROR",
  "message": "Consultant already has an appointment during this time",
  "code": "SCHEDULING_CONFLICT"
}
```

#### **5. System Errors (500)**
```json
{
  "error": "SYSTEM_ERROR",
  "message": "Database connection failed",
  "code": "DB_CONNECTION_ERROR",
  "requestId": "req_123456"
}
```

## üöÄ **Roadmap Ph√°t Tri·ªÉn**

### **Phase 1 (MVP) - Ho√†n th√†nh:**
- ‚úÖ ƒêƒÉng k√Ω/ƒëƒÉng nh·∫≠p v·ªõi JWT
- ‚úÖ T√¨m ki·∫øm v√† filter consultant
- ‚úÖ ƒê·∫∑t l·ªãch h·∫πn v·ªõi validation
- ‚úÖ Thanh to√°n VNPAY/MOMO
- ‚úÖ Qu·∫£n l√Ω tr·∫°ng th√°i l·ªãch h·∫πn
- ‚úÖ H·ªá th·ªëng th√¥ng b√°o c∆° b·∫£n
- ‚úÖ Ph√¢n quy·ªÅn role-based

### **Phase 2 (Enhancement) - ƒêang ph√°t tri·ªÉn:**
- üîÑ Video call integration (WebRTC)
- üîÑ AI chatbot h·ªó tr·ª£
- üîÑ Advanced analytics dashboard
- üîÑ Mobile app (React Native)
- üîÑ Email/SMS notifications
- üîÑ Payment gateway expansion

### **Phase 3 (Scale) - K·∫ø ho·∫°ch:**
- üìã Multi-language support (EN/VI)
- üìã Advanced payment methods (ZaloPay, Bank Transfer)
- üìã AI recommendation engine
- üìã Enterprise features (SSO, LDAP)
- üìã Advanced reporting (BI integration)
- üìã API rate limiting & caching

### **Phase 4 (Enterprise) - T∆∞∆°ng lai:**
- üöÄ Microservices architecture
- üöÄ Kubernetes deployment
- üöÄ Advanced security (OAuth2, 2FA)
- üöÄ Real-time analytics
- üöÄ Machine learning integration
- üöÄ Third-party integrations

---

*T√†i li·ªáu n√†y ƒë∆∞·ª£c c·∫≠p nh·∫≠t theo qu√° tr√¨nh ph√°t tri·ªÉn d·ª± √°n v√† best practices trong ng√†nh.* 